<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Website Builder IDE</title>
    <!-- 
      Using a modern font (Inter) for a cleaner UI.
      It's loaded from Google Fonts.
    -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&family=Roboto+Mono&display=swap" rel="stylesheet">
    
    <link rel="stylesheet" href="style.css">
    
    <!-- JSZip library (for exporting) -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jszip/3.10.1/jszip.min.js"></script>
    <!-- FileSaver.js (for triggering the download) -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/FileSaver.js/2.0.0/FileSaver.min.js"></script>
</head>
<body>

    <!-- Main 3-column layout -->
    <div class="ide-container">

        <!-- Left Panel: Library, Pages, Assets -->
        <aside class="left-panel">
            <div class="panel-header">
                <strong>Library</strong>
                <!-- Export button moved to the top header for global actions -->
            </div>
            
            <div id="left-panel-content" class="panel-content">
                <!-- Pages Section -->
                <div class="panel-section">
                    <div class="panel-section-header">
                        <strong>Pages</strong>
                        <button id="add-new-page-btn" class="icon-btn" title="Add New Page">
                            <!-- Simple + icon -->
                            <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><line x1="12" y1="5" x2="12" y2="19"></line><line x1="5" y1="12" x2="19" y2="12"></line></svg>
                        </button>
                    </div>
                    <ul id="page-list" class="item-list">
                        <!-- li elements will be added by JS -->
                        <!-- Example: 
                        <li class="active">
                            <span>index.html</span>
                            <button class="delete-page-btn" title="Delete Page">×</button>
                        </li>
                        -->
                    </ul>
                </div>

                <!-- Atoms Section -->
                <div class="panel-section">
                    <div class="panel-section-header"><strong>Atoms</strong></div>
                    <div id="atoms-list" class="block-grid">
                        <!-- Draggable elements added by JS -->
                    </div>
                </div>
                
                <!-- Blocks Section -->
                <div class="panel-section">
                    <div class="panel-section-header"><strong>Blocks</strong></div>
                    <div id="blocks-list" class="block-grid">
                        <!-- Draggable elements added by JS -->
                    </div>
                </div>

                <!-- My Components Section -->
                <div class="panel-section">
                    <div class="panel-section-header">
                        <strong>My Components</strong>
                    </div>
                    <div id="components-list" class="block-grid">
                        <!-- Draggable user components added by JS -->
                    </div>
                </div>

                <!-- Project Assets Section -->
                <div class="panel-section">
                    <div class="panel-section-header">
                        <strong>Project Assets</strong>
                        <input type="file" id="upload-asset-input" style="display: none;" multiple accept="image/*,video/*,audio/*,.pdf,.json">
                        <button id="upload-asset-btn" class="icon-btn" title="Upload Asset">
                            <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><line x1="12" y1="5" x2="12" y2="19"></line><line x1="5" y1="12" x2="19" y2="12"></line></svg>
                        </button>
                    </div>
                    <div id="project-assets-list" class="asset-grid">
                        <!-- Asset items added by JS -->
                    </div>
                </div>
                
            </div>
        </aside>

        <!-- Center Panel: Canvas, Code Editor -->
        <main class="center-panel">
            
            <div class="canvas-toolbar">
                <div class="toolbar-left">
                    <span id="current-project-label" title="Current Project">My Project</span>
                    <span class="divider">/</span>
                    <span id="current-page-label" title="Current Page">index.html</span>
                </div>
                <div class="toolbar-center">
                    <button data-size="desktop" title="Desktop View (100%)" class="icon-btn active-view">
                        <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><rect x="2" y="3" width="20" height="14" rx="2" ry="2"></rect><line x1="8" y1="21" x2="16" y2="21"></line><line x1="12" y1="17" x2="12" y2="21"></line></svg>
                    </button>
                    <button data-size="tablet" title="Tablet View (768px)" class="icon-btn">
                        <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><rect x="4" y="2" width="16" height="20" rx="2" ry="2"></rect><line x1="12" y1="18" x2="12.01" y2="18"></line></svg>
                    </button>
                    <button data-size="mobile" title="Mobile View (390px)" class="icon-btn">
                        <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><rect x="5" y="2" width="14" height="20" rx="2" ry="2"></rect><line x1="12" y1="18" x2="12.01" y2="18"></line></svg>
                    </button>
                </div>
                <div class="toolbar-right">
                    <button id="export-project-btn" class="primary-btn" title="Export Project as .zip">
                        <svg xmlns="http://www.w3.org/2000/svg" width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"></path><polyline points="7 10 12 15 17 10"></polyline><line x1="12" y1="15" x2="12" y2="3"></line></svg>
                        Export
                    </button>
                </div>
            </div>

            <div class="canvas-wrapper">
                <iframe id="website-canvas"></iframe>
            </div>

            <div class="code-editor-container">
                <div class="code-editor-tabs">
                    <button id="code-tab-html" class="code-tab active-tab" data-tab="html">HTML</button>
                    <button id="code-tab-css" class="code-tab" data-tab="css">CSS</button>
                    <button id="code-tab-js" class="code-tab" data-tab="js">JS</button>
                    <button id="save-code-btn" class="primary-btn" title="Save code and refresh canvas">
                        <svg xmlns="http://www.w3.org/2000/svg" width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2z"></path><polyline points="17 21 17 13 7 13 7 21"></polyline><polyline points="7 3 7 8 15 8"></polyline></svg>
                        Save & Refresh
                    </button>
                </div>
                <div class="code-editor-panes">
                    <textarea id="code-editor-html" class="code-editor active-editor" spellcheck="false"></textarea>
                    <textarea id="code-editor-css" class="code-editor" spellcheck="false"></textarea>
                    <textarea id="code-editor-js" class="code-editor" spellcheck="false"></textarea>
                </div>
            </div>
        </main>

        <!-- Right Panel: Inspector -->
        <aside class="right-panel">
            <div class="panel-header"><strong>Inspector</strong></div>
            <div id="right-panel-content" class="panel-content">
                <div id="inspector-placeholder" class="inspector-placeholder">
                    <svg xmlns="http://www.w3.org/2000/svg" width="48" height="48" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1" stroke-linecap="round" stroke-linejoin="round" class="placeholder-icon"><path d="M3 3l7.07 16.97 2.51-7.39 7.39-2.51L3 3z"></path><path d="M13 13l6 6"></path></svg>
                    <p>Select an element in the canvas to inspect it.</p>
                </div>

                <div id="inspector-content" style="display: none;">
                    <div class="panel-section inspector-header">
                        <strong id="inspector-element-tag">&lt;div&gt;</strong>
                        <div id="inspector-element-classes" title="Click to copy classes">...</div>
                    </div>
                    
                    <!-- Inspector Tabs -->
                    <div class="inspector-tabs">
                        <button class="inspector-tab active-tab" data-tab="style">Style</button>
                        <button class="inspector-tab" data-tab="settings">Settings</button>
                        <button class="inspector-tab" data-tab="interactions">Interactions</button>
                    </div>
                    
                    <!-- Style Pane (Tailwind Example) -->
                    <div id="inspector-pane-style" class="inspector-pane active-pane">
                        <div class="inspector-group" id="text-editor-group" style="display: none;">
                            <label for="text-content-input">Text Content:</label>
                            <textarea id="text-content-input" rows="3" class="form-input"></textarea>
                            <button id="apply-text-btn" class="text-btn">Apply Text</button>
                        </div>
                        <div class="inspector-group">
                            <label for="tailwind-classes-input">Tailwind Classes:</label>
                            <textarea id="tailwind-classes-input" rows="5" class="form-input"></textarea>
                            <button id="apply-tailwind-btn" class="text-btn">Apply Classes</button>
                        </div>
                        <div class="inspector-group">
                            <label for="style-display-select">Display:</label>
                            <select id="style-display-select" class="form-input">
                                <option value="">(Inherit)</option>
                                <option value="block">Block</option>
                                <option value="inline-block">Inline-Block</option>
                                <option value="inline">Inline</option>
                                <option value="flex">Flex</option>
                                <option value="inline-flex">Inline-Flex</option>
                                <option value="grid">Grid</option>
                                <option value="inline-grid">Inline-Grid</option>
                                <option value="hidden">Hidden (None)</option>
                            </select>
                        </div>
                        <div class="inspector-group">
                            <label for="style-opacity-input">Opacity:</label>
                            <input type="number" id="style-opacity-input" class="form-input" min="0" max="1" step="0.1" placeholder="1.0">
                        </div>
                        <button id="apply-styles-btn" class="text-btn">Apply Styles</button>
                    </div>
                    
                    <!-- Settings Pane (Attributes) -->
                    <div id="inspector-pane-settings" class="inspector-pane">
                        <div class="inspector-group" id="attributes-editor-group">
                            <label>Attributes:</label>
                            <div id="attributes-list">
                                <!-- JS will populate this -->
                                <!-- Example:
                                <div class="attribute-item">
                                    <input type="text" class="attr-key" value="src">
                                    <input type="text" class="attr-value" value="http://...">
                                    <button class="remove-attr-btn">×</button>
                                </div>
                                -->
                            </div>
                            <button id="add-attribute-btn" class="text-btn">Add Attribute</button>
                            <button id="apply-attributes-btn" class="text-btn">Apply Attributes</button>
                        </div>
                        <div class="inspector-group">
                            <label>Component:</label>
                            <button id="save-as-component-btn" class="text-btn">Save Selected as Component</button>
                        </div>
                    </div>
                    
                    <!-- Interactions Pane -->
                    <div id="inspector-pane-interactions" class="inspector-pane">
                        <div class="inspector-group">
                            <label for="animation-on-load-select">On Load Animation:</label>
                            <select id="animation-on-load-select" class="form-input">
                                <option value="">None</option>
                                <option value="wb-anim-fade-in">Fade In</option>
                                <option value="wb-anim-slide-in-left">Slide In (from Left)</option>
                                <option value="wb-anim-slide-in-top">Slide In (from Top)</option>
                                <option value="wb-anim-scale-in">Scale In</option>
                            </select>
                            <button id="apply-animation-btn" class="text-btn">Apply Animation</button>
                        </div>
                    </div>
                </div>
            </div>
        </aside>

    </div>

    <!-- Modal for "Add New Page" -->
    <div id="add-page-modal" class="modal-overlay" style="display: none;">
        <div class="modal-content">
            <h3>Create New Page</h3>
            <p>Enter a name for your new page (e.g., about.html).</p>
            <label for="new-page-name-input">Page Name:</label>
            <input type="text" id="new-page-name-input" class="form-input" placeholder="about.html">
            <div class="modal-actions">
                <button id="modal-cancel-btn" class="secondary-btn">Cancel</button>
                <button id="modal-create-btn" class="primary-btn">Create</button>
            </div>
        </div>
    </div>

    <!-- Modal for "Confirm Delete" -->
    <div id="confirm-delete-modal" class="modal-overlay" style="display: none;">
        <div class="modal-content">
            <h3 id="confirm-delete-title">Delete Page</h3>
            <p id="confirm-delete-message">Are you sure you want to delete this page? This action cannot be undone.</p>
            <div class="modal-actions">
                <button id="modal-delete-cancel-btn" class="secondary-btn">Cancel</button>
                <button id="modal-delete-confirm-btn" class="danger-btn">Delete</button>
            </div>
        </div>
    </div>

    <!-- Global Loading Overlay -->
    <div id="loading-overlay" class="loading-overlay" style="display: none;">
        <div class="loading-spinner"></div>
        <p id="loading-message">Loading...</p>
    </div>

    <!-- Main Application Script -->
    <script src="app.js" type="module"></script>
</body>
</html>